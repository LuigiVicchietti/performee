<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/logos/logo-guaxinim-solo.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="./css/dash.css">
    <title>Dashboard Sevidor</title>
</head>

<body>
    <main>
        <nav class="select-disable" id="Nav">
            <img id="Expand" src="../assets/icons/open-icone.png" alt="Icone de expansão">
            <ul>
                <span>
                    <a href="./dash-geral.html">
                        <img src="../assets/icons/House.png" alt="Logo Home">
                        <text>Home</text>
                    </a>
                    <a href="./dash-datacenters.html">
                        <img src="../assets/icons/servidores.png" alt="Logo aba servidores">
                        <text>Data Centers</text>
                    </a>
                    <a href="./dash-cadastros.html">
                        <img src="../assets/icons/PlusSquare.png" alt="Logo Cadastros">
                        <text>Cadastro</text>
                    </a>
                </span>
                <span>
                    <a href="./dash-perfil-user.html">
                        <img src="../assets/icons/User-icon.png" alt="Logo User">
                        <text>Perfil</text>
                    </a>
                    <a href="../login.html">
                        <img class="select-disable" src="../assets/icons/exit.png" alt="Sair">
                        <text style="color: crimson;">Sair</text>
                    </a>
                </span>
            </ul>
        </nav>
        <section>
            <header class="server">
                <h1 class="select-disable" id="QualServidor">DESKTOP-XX-XPTO <img class="select-disable"
                        src="../assets/icons/WindowsLogo-blue.png" alt="Sistema Operacional"> </h1>
                <!-- <div class="select-disable">
                    <img src="../assets/icons/pesquisa-icone.png" alt="Icone Pesquisa" id="Pesquisar">
                    <input type="text" name="input pesquisa" id="InputPesquisa" placeholder="Pesquisar por Servidor">
                </div> -->
                <!-- <img class="select-disable" src="../assets/icons/FilePdf.png" alt="PDF"> -->
            </header>
            <div id="Content" class="server">
                <div class="column">
                    <div class="box-style2">
                        <div class="box-header" id="StatusCpu">
                            <h2 onclick="exibirMaisInfo(2)" id="H2CPU">CPU</h2>
                        </div>
                        <div>
                            <span id="UsoCpu">X%</span>
                            <text>Moda da ultimas 48 horas</text>
                        </div>
                    </div>
                    <div class="box-style2">
                        <div class="box-header" id="StatusRam">
                            <h2 onclick="exibirMaisInfo(3)" id="H2RAM">RAM</h2>
                        </div>
                        <div>
                            <span id="UsoRam">X%</span>
                            <text>Moda da ultimas 48 horas</text>
                        </div>
                    </div>
                    <div class="box-style2">
                        <div class="box-header" id="StatusDisc">
                            <h2 onclick="exibirMaisInfo(4)" id="H2DISCO">DISCO</h2>
                        </div>
                        <div>
                            <span id="UsoDisc">X%</span>
                            <text>Velocidade de escrita atual</text>
                        </div>
                    </div>
                    <div class="box-style2">
                        <div class="box-header" id="StatusRede">
                            <h2 onclick="exibirMaisInfo(5)" id="H2REDE">REDE</h2>
                        </div>
                        <div>
                            <span id="UploadRede">X%</span>
                            <text>Upload atual</text>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <h2><span id="H2GPU">GPU</span> - Utilização em tempo real</h2>
                    <div><canvas id="chartUsoTempoRealGpu"></canvas></div>
                    <div class="box-alerta">
                        <div class="green">
                            <h3>Estável</h3>
                            <text>Utilização menor ou igual a 65%</text>
                        </div>
                        <div class="yellow">
                            <h3>Alerta</h3>
                            <text>Utilização entre 66% a 84%</text>
                        </div>
                        <div class="red">
                            <h3>Risco!</h3>
                            <text>Utilização maior ou igual a 85%</text>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <button class="btn-log" onclick="exibirMaisInfo(1)" id="BtnLog">
                        <span>Logs do servidor</span>
                    </button>
                    <div id="Logs">
                        <h2 style="width: auto;">Desempenho periódico</h2>
                        <div id="LogContentPeriódico">
                            <div class="log-box">
                                <span class="green" style="border-radius: 100%;"></span>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                <p>20/10/2023 18:00:00</p>
                            </div>
                            <div class="log-box">
                                <span class="green" style="border-radius: 100%;"></span>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                <p>20/10/2023 18:00:00</p>
                            </div>
                            <div class="log-box">
                                <span class="green" style="border-radius: 100%;"></span>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                <p>20/10/2023 18:00:00</p>
                            </div>
                            <div class="log-box">
                                <span class="green" style="border-radius: 100%;"></span>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                <p>20/10/2023 18:00:00</p>
                            </div>
                            <div class="log-box">
                                <span class="green" style="border-radius: 100%;"></span>
                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                <p>20/10/2023 18:00:00</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="modal" id="Modal">
            <div class="content-modal type2" id="ModalContent">
                <img class="fechar select-disable" src="../assets/icons/X.png" alt="Fechar" onclick="abrirModal()">
                <div class="container-modal-chart" id="Container1">
                    <div class="box-header select-disable">
                        <h1>Registro de logs</h1>
                        <div>
                            <select name="slc-order-log" id="SlcLog" onchange="exibirLogsPerServidor()">
                                <option value="1" selected>Urgência</option>
                                <option value="2">Novos</option>
                                <option value="3">Antigos</option>
                            </select>
                        </div>
                    </div>
                    <div id="LogContent"></div>
                </div>
                <div class="container-modal-chart" id="Container2">
                    <div class="content-row-chart">
                        <div>
                            <h2>Utilização em tempo real</h2>
                            <canvas id="chartUsoTempoRealCpu"></canvas>
                        </div>
                        <div>
                            <h2>Temperatura em tempo real</h2>
                            <canvas id="chartTempTempoRealCpu"></canvas>
                        </div>
                    </div>
                    <div class="content-row-chart">
                        <div>
                            <h2>Uso e Temperatura em intervalos de 1hora</h2>
                            <canvas id="chartUsoTempPerHora"></canvas>
                        </div>
                        <div>
                            <h2>Quantidade de alertas (hoje)</h2>
                            <canvas id="chartAlertasDoDiaCpu"></canvas>
                        </div>
                    </div>
                </div>
                <div class="container-modal-chart" id="Container3">
                    <div class="content-row-chart type2">
                        <div>
                            <h2>Utilização em tempo real</h2>
                            <canvas id="chartUsoTempoRealRam"></canvas>
                        </div>
                    </div>
                    <div class="content-row-chart">
                        <div>
                            <h2>Usado X Total a cada 1 hora</h2>
                            <canvas id="chartUsadoTotalRam"></canvas>
                        </div>
                        <div>
                            <h2>Quantidade de alertas em 1 dia</h2>
                            <canvas id="chartAlertasDoDiaRam"></canvas>
                        </div>
                    </div>
                </div>
                <div class="container-modal-chart" id="Container4">
                    <!-- Graficos do disco - procurar oq por aqui -->
                </div>
                <div class="container-modal-chart" id="Container5">
                    <div class="content-row-chart">
                        <div>
                            <h2>Upload e Download em tempo real</h2>
                            <canvas id="chartUpDownTempoRealRede"></canvas>
                        </div>
                        <div>
                            <h2>Quantidade de alertas em 1 dia</h2>
                            <canvas id="chartAlertasDoDiaRede"></canvas>
                        </div>
                    </div>
                    <div class="content-row-chart type2">
                        <div>
                            <h2>Upload e Download atual X Médias dos dias anteriores</h2>
                            <canvas id="chartCompararRede"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

</html>
<script src="./js/global.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="./js/dash-server.js"></script>
<script>
    const chartGpuUsoTempoReal = document.getElementById('chartUsoTempoRealGpu')

        , chartCpuUsoTempoReal = document.getElementById('chartUsoTempoRealCpu')
        , chartCpuTemperaturaTempoReal = document.getElementById('chartTempTempoRealCpu')
        , chartCpuUsoTempHora = document.getElementById('chartUsoTempPerHora')
        , chartAlertaDiaCpu = document.getElementById('chartAlertasDoDiaCpu')

        , chartRamUsoTempoReal = document.getElementById('chartUsoTempoRealRam')
        , chartUsadoTotalRam = document.getElementById('chartUsadoTotalRam')
        , chartAlertaDiaRam = document.getElementById('chartAlertasDoDiaRam')

        , chartUpDownTempoRealRede = document.getElementById('chartUpDownTempoRealRede')
        , chartAlertasDiaRede = document.getElementById('chartAlertasDoDiaRede')
        , chartCompararRede = document.getElementById('chartCompararRede');

    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Gráfico GpuUsoTempoReal



    function fetchUltimasLeiturasGpu() {
        fetch(`/leitura/ultimasLeiturasGpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    jsonInfo.reverse();
                    loadGpuUsoTempoReal(jsonInfo, sessionStorage.IP_SERVIDOR);
                })
            } else {
                console.log('Erro no .THEN ultimasLeiturasGpu() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }

    function loadGpuUsoTempoReal(resposta, ipServidor) {
        let labels = [];

        let dados = {
            labels: labels,
            datasets: [{
                label: 'Uso em %',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        };

        for (let i = 0; i < resposta.length; i++) {
            let registroDaVez = resposta[i];
            labels.push(registroDaVez.dataLeitura);
            dados.datasets[0].data.push(registroDaVez.emUso);

            if (registroDaVez.emUso > 85) {
                dados.datasets[0].backgroundColor.push('crimson');
            } else if (registroDaVez <= 84 || registroDaVez >= 66) {
                dados.datasets[0].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[0].backgroundColor.push('#65da65');
            }
        }

        const config = {
            type: 'line',
            data: dados,
        };

        let v_chartUsoGpuTempoReal = new Chart(
            chartGpuUsoTempoReal,
            config
        );

        setTimeout(() => refreshChartGpuUsoTempoReal(ipServidor, dados, v_chartUsoGpuTempoReal), 3000);
    }

    function refreshChartGpuUsoTempoReal(ipServidor, dados, chart) {
        fetch(`/leitura/leituraMaisRecenteGpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    if (jsonInfo[0].dataLeitura == dados.labels[dados.length - 1]) {
                        console.log('Sem novos dados');
                    } else {
                        dados.labels.shift();
                        dados.labels.push(jsonInfo[0].dataLeitura);

                        dados.datasets[0].data.shift();
                        dados.datasets[0].data.push(jsonInfo[0].emUso);

                        if (jsonInfo[0].emUso > 85) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].emUso <= 84 || jsonInfo[0].emUso >= 66) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#65da65');
                        }

                        chart.update();
                    }

                    setTimeout(() => refreshChartGpuUsoTempoReal(ipServidor, dados, chart), 3000);
                })
            } else {
                console.log('Erro no .THEN refreshChartGpuUsoTempoReal -> leituraMaisRecenteGpu() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------





    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Gráfico CpuUsoTempoReal



    function fetchUltimasLeiturasCpu() {
        fetch(`/leitura/ultimasLeiturasCpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    jsonInfo.reverse();
                    loadCpuUsoTempoReal(jsonInfo, sessionStorage.IP_SERVIDOR);
                    loadCpuTempTempoReal(jsonInfo, sessionStorage.IP_SERVIDOR);
                    loadCpuUsoTempTempoReal(jsonInfo, sessionStorage.IP_SERVIDOR);
                })
            } else {
                console.log('Erro no .THEN ultimasLeiturasCpu() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }

    function loadCpuUsoTempoReal(resposta, ipServidor) {
        let labels = [];

        let dados = {
            labels: labels,
            datasets: [{
                label: 'Uso em %',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        };

        for (let i = 0; i < resposta.length; i++) {
            let registroDaVez = resposta[i];
            labels.push(registroDaVez.dataLeitura);
            dados.datasets[0].data.push(registroDaVez.emUso);

            if (registroDaVez.emUso > 85) {
                dados.datasets[0].backgroundColor.push('crimson');
            } else if (registroDaVez <= 84 || registroDaVez >= 66) {
                dados.datasets[0].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[0].backgroundColor.push('#65da65');
            }
        }

        const config = {
            type: 'line',
            data: dados,
        };

        let v_chartUsoCpuTempoReal = new Chart(
            chartCpuUsoTempoReal,
            config
        );

        setTimeout(() => refreshChartCpuUsoTempoReal(ipServidor, dados, v_chartUsoCpuTempoReal), 3000);
    }

    function refreshChartCpuUsoTempoReal(ipServidor, dados, chart) {
        fetch(`/leitura/leituraMaisRecenteCpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    if (jsonInfo[0].dataLeitura == dados.labels[dados.length - 1]) {
                        console.log('Sem novos dados');
                    } else {
                        dados.labels.shift();
                        dados.labels.push(jsonInfo[0].dataLeitura);

                        dados.datasets[0].data.shift();
                        dados.datasets[0].data.push(jsonInfo[0].emUso);

                        if (jsonInfo[0].emUso > 85) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].emUso <= 84 || jsonInfo[0].emUso >= 66) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#65da65');
                        }

                        chart.update();
                    }

                    setTimeout(() => refreshChartCpuUsoTempoReal(ipServidor, dados, chart), 3000);
                })
            } else {
                console.log('Erro no .THEN refreshChartCpuUsoTempoReal -> leituraMaisRecenteCpu() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Gráfico CpuTempTempoReal


    function loadCpuTempTempoReal(resposta, ipServidor) {
        let labels = [];

        let dados = {
            labels: labels,
            datasets: [{
                label: 'Temperatura',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        };

        for (let i = 0; i < resposta.length; i++) {
            let registroDaVez = resposta[i];
            labels.push(registroDaVez.dataLeitura);
            dados.datasets[0].data.push(registroDaVez.temperatura);

            if (registroDaVez.emUso > 39) {
                dados.datasets[0].backgroundColor.push('crimson');
            } else if (registroDaVez <= 39 || registroDaVez >= 35) {
                dados.datasets[0].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[0].backgroundColor.push('#65da65');
            }
        }

        const config = {
            type: 'line',
            data: dados,
        };

        let v_chartTempCpuTempoReal = new Chart(
            chartCpuTemperaturaTempoReal,
            config
        );

        setTimeout(() => refreshChartTempTempoReal(ipServidor, dados, v_chartTempCpuTempoReal), 3000);
    }

    function refreshChartTempTempoReal(ipServidor, dados, chart) {
        fetch(`/leitura/leituraMaisRecenteCpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    if (jsonInfo[0].dataLeitura == dados.labels[dados.length - 1]) {
                        console.log('Sem novos dados');
                    } else {
                        dados.labels.shift();
                        dados.labels.push(jsonInfo[0].dataLeitura);

                        dados.datasets[0].data.shift();
                        dados.datasets[0].data.push(jsonInfo[0].temperatura);

                        if (jsonInfo[0].temperatura > 39) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].temperatura <= 39 || jsonInfo[0].temperatura >= 35) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#65da65');
                        }

                        chart.update();
                    }

                    setTimeout(() => refreshChartTempTempoReal(ipServidor, dados, chart), 3000);
                })
            } else {
                console.log('Erro no .THEN refreshChartTempUsoTempoReal -> leituraMaisRecenteRam() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------




    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Gráfico CpuUsoTempTempoReal


    function loadCpuUsoTempTempoReal(resposta, ipServidor) {
        let labels = [];

        let dados = {
            labels: labels,
            datasets: [{
                label: 'Uso em %',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            },
            {
                label: 'Temperatura',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        };

        for (let i = 0; i < resposta.length; i++) {
            let registroDaVez = resposta[i];
            labels.push(registroDaVez.dataLeitura);
            dados.datasets[0].data.push(registroDaVez.emUso);
            dados.datasets[1].data.push(registroDaVez.temperatura);

            if (registroDaVez.emUso > 85) {
                dados.datasets[0].backgroundColor.push('crimson');
            } else if (registroDaVez <= 84 || registroDaVez >= 66) {
                dados.datasets[0].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[0].backgroundColor.push('#65da65');
            }

            if (registroDaVez.emUso > 39) {
                dados.datasets[1].backgroundColor.push('crimson');
            } else if (registroDaVez <= 39 || registroDaVez >= 35) {
                dados.datasets[1].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[1].backgroundColor.push('#65da65');
            }
        }

        const config = {
            type: 'line',
            data: dados,
        };

        let v_chartUsoTempCpuTempoReal = new Chart(
            chartCpuUsoTempHora,
            config
        );

        setTimeout(() => refreshChartUsoTempTempoReal(ipServidor, dados, v_chartUsoTempCpuTempoReal), 3000);
    }

    function refreshChartUsoTempTempoReal(ipServidor, dados, chart) {
        fetch(`/leitura/leituraMaisRecenteCpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    if (jsonInfo[0].dataLeitura == dados.labels[dados.length - 1]) {
                        console.log('Sem novos dados');
                    } else {
                        dados.labels.shift();
                        dados.labels.push(jsonInfo[0].dataLeitura);

                        dados.datasets[0].data.shift();
                        dados.datasets[0].data.push(jsonInfo[0].emUso);

                        dados.datasets[1].data.shift();
                        dados.datasets[1].data.push(jsonInfo[0].temperatura);

                        if (jsonInfo[0].emUso > 85) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].emUso <= 84 || jsonInfo[0].emUso >= 66) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#65da65');
                        }

                        if (jsonInfo[0].temperatura > 39) {
                            dados.datasets[1].backgroundColor.shift();
                            dados.datasets[1].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].temperatura <= 39 || jsonInfo[0].temperatura >= 35) {
                            dados.datasets[1].backgroundColor.shift();
                            dados.datasets[1].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[1].backgroundColor.shift();
                            dados.datasets[1].backgroundColor.push('#65da65');
                        }

                        chart.update();
                    }

                    setTimeout(() => refreshChartUsoTempTempoReal(ipServidor, dados, chart), 3000);
                })
            } else {
                console.log('Erro no .THEN refreshChartTempUsoTempoReal -> leituraMaisRecenteCpu() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Chart AlertasDiaCpu



    function loadAlertaDiaCpu() {
        new Chart(chartAlertaDiaCpu, {
            type: 'doughnut',
            data: {
                labels: ['Estável', 'Alerta', 'Risco'],
                datasets: [{
                    label: 'Quantidade de alertas',
                    data: [arrayAlertasCpu[0], arrayAlertasCpu[1], arrayAlertasCpu[2]],
                    backgroundColor: ['#65da65', '#F1CE14', 'crimson'],
                    borderColor: ['#65da65', '#F1CE14', 'crimson'],
                    borderWidth: 1
                }]
            },

            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------





    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Gráfico RamUsoTempoReal



    function fetchUltimasLeiturasRam() {
        fetch(`/leitura/ultimasLeiturasRam/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    jsonInfo.reverse();
                    loadRamUsoTempoReal(jsonInfo, sessionStorage.IP_SERVIDOR);
                })
            } else {
                console.log('Erro no .THEN ultimasLeiturasRam() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }

    function loadRamUsoTempoReal(resposta, ipServidor) {
        let labels = [];

        let dados = {
            labels: labels,
            datasets: [{
                label: 'Utilizção da ram',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        };

        for (let i = 0; i < resposta.length; i++) {
            let registroDaVez = resposta[i];
            labels.push(registroDaVez.dataLeitura);
            dados.datasets[0].data.push(registroDaVez.emUso);

            if (registroDaVez.emUso > (registroDaVez.capacidadeTotal * .85)) {
                dados.datasets[0].backgroundColor.push('crimson');
            } else if (registroDaVez.emUso <= (registroDaVez.capacidadeTotal * .84) || registroDaVez.emUso >= (registroDaVez.capacidadeTotal * .66)) {
                dados.datasets[0].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[0].backgroundColor.push('#65da65');
            }
        }

        const config = {
            type: 'line',
            data: dados,
        };

        let v_chartUsoRamTempoReal = new Chart(
            chartRamUsoTempoReal,
            config
        );

        setTimeout(() => refreshChartRamUsoTempoReal(ipServidor, dados, v_chartUsoRamTempoReal), 3000);
    }

    function refreshChartRamUsoTempoReal(ipServidor, dados, chart) {
        fetch(`/leitura/leituraMaisRecenteRam/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    if (jsonInfo[0].dataLeitura == dados.labels[dados.length - 1]) {
                        console.log('Sem novos dados');
                    } else {
                        dados.labels.shift();
                        dados.labels.push(jsonInfo[0].dataLeitura);

                        dados.datasets[0].data.shift();
                        dados.datasets[0].data.push(jsonInfo[0].emUso);

                        if (jsonInfo[0].emUso > (jsonInfo[0].capacidadeTotal * .85)) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].emUso <= (jsonInfo[0].capacidadeTotal * .84) || jsonInfo[0].emUso >= (jsonInfo[0].capacidadeTotal * .66)) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#65da65');
                        }

                        chart.update();
                    }

                    setTimeout(() => refreshChartRamUsoTempoReal(ipServidor, dados, chart), 3000);
                })
            } else {
                console.log('Erro no .THEN refreshChartRamUsoTempoReal -> leituraMaisRecenteRam() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------

    function loadRamUsadoPerHora() {
        new Chart(chartUsadoTotalRam, {
            type: 'bar',
            data: {
                labels: ['5 horas atrás', '4 horas atrás', '3 horas atrás', '2 horas atrás', ' 1 hora atrás', 'agora'],
                datasets: [{
                    label: 'Usado',
                    data: [arrayRamPerHora[0][0], arrayRamPerHora[1][0], arrayRamPerHora[2][0], arrayRamPerHora[3][0], arrayRamPerHora[4][0], arrayRamPerHora[5][0]],
                    backgroundColor: ['#096B85', '#096B85', '#096B85', '#096B85', '#096B85', '#096B85'],
                    borderColor: ['#096B85'],
                    borderWidth: .9
                },
                {
                    label: 'Total',
                    data: [arrayRamPerHora[0][1], arrayRamPerHora[1][1], arrayRamPerHora[2][1], arrayRamPerHora[3][1], arrayRamPerHora[4][1], arrayRamPerHora[5][1]],
                    backgroundColor: ['#6a5286', '#6a5286', '#6a5286', '#6a5286', '#6a5286', '#6a5286'],
                    borderColor: ['#096B85'],
                    borderWidth: .9
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Chart AlertasDiaRam



    function loadAlertaDiaRam() {
        new Chart(chartAlertaDiaRam, {
            type: 'doughnut',
            data: {
                labels: ['Estável', 'Alerta', 'Risco'],
                datasets: [{
                    label: 'Quantidade de alertas',
                    data: [arrayAlertasRam[0], arrayAlertasRam[1], arrayAlertasRam[2]],
                    backgroundColor: ['#65da65', '#F1CE14', 'crimson'],
                    borderColor: ['#65da65', '#F1CE14', 'crimson'],
                    borderWidth: 1
                }]
            },

            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------



    // GRAFICOS DISCO


    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Gráfico GpuUsoTempoReal



    function fetchUltimasLeiturasRede() {
        fetch(`/leitura/ultimasLeiturasRede/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    jsonInfo.reverse();
                    loadRedeuUpDownTempoReal(jsonInfo, sessionStorage.IP_SERVIDOR);
                })
            } else {
                console.log('Erro no .THEN ultimasLeiturasRede() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }

    function loadRedeuUpDownTempoReal(resposta, ipServidor) {
        let labels = [];

        let dados = {
            labels: labels,
            datasets: [{
                label: 'Upload',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            },
            {
                label: 'Download',
                data: [],
                fill: false,
                backgroundColor: [],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        };

        for (let i = 0; i < resposta.length; i++) {
            let registroDaVez = resposta[i];
            labels.push(registroDaVez.dataLeitura);
            dados.datasets[0].data.push(registroDaVez.upload);
            dados.datasets[1].data.push(registroDaVez.download);

            if (registroDaVez.emUso < 20) {
                dados.datasets[0].backgroundColor.push('crimson');
            } else if (registroDaVez <= 59 || registroDaVez >= 20) {
                dados.datasets[0].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[0].backgroundColor.push('#65da65');
            }

            if (registroDaVez.emUso < 40) {
                dados.datasets[1].backgroundColor.push('crimson');
            } else if (registroDaVez <= 89 || registroDaVez >= 40) {
                dados.datasets[1].backgroundColor.push('#F1CE14');
            } else {
                dados.datasets[1].backgroundColor.push('#65da65');
            }
        }

        const config = {
            type: 'line',
            data: dados,
        };

        let v_chartRedeUpDownTempoReal = new Chart(
            chartUpDownTempoRealRede,
            config
        );

        setTimeout(() => refreshChartUpDownTempoReal(ipServidor, dados, v_chartRedeUpDownTempoReal), 3000);
    }

    function refreshChartUpDownTempoReal(ipServidor, dados, chart) {
        fetch(`/leitura/leituraMaisRecenteCpu/${sessionStorage.IP_SERVIDOR}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    if (jsonInfo[0].dataLeitura == dados.labels[dados.length - 1]) {
                        console.log('Sem novos dados');
                    } else {
                        dados.labels.shift();
                        dados.labels.push(jsonInfo[0].dataLeitura);

                        dados.datasets[0].data.shift();
                        dados.datasets[0].data.push(jsonInfo[0].upload);

                        dados.datasets[1].data.shift();
                        dados.datasets[1].data.push(jsonInfo[0].download);

                        if (jsonInfo[0].upload < 20) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].upload <= 59 || jsonInfo[0].upload > 20) {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[0].backgroundColor.shift();
                            dados.datasets[0].backgroundColor.push('#65da65');
                        }

                        if (jsonInfo[0].download < 40) {
                            dados.datasets[1].backgroundColor.shift();
                            dados.datasets[1].backgroundColor.push('crimson');
                        } else if (jsonInfo[0].download <= 89 || jsonInfo[0].download >= 40) {
                            dados.datasets[1].backgroundColor.shift();
                            dados.datasets[1].backgroundColor.push('#F1CE14');
                        } else {
                            dados.datasets[1].backgroundColor.shift();
                            dados.datasets[1].backgroundColor.push('#65da65');
                        }

                        chart.update();
                    }

                    setTimeout(() => refreshChartUpDownTempoReal(ipServidor, dados, chart), 3000);
                })
            } else {
                console.log('Erro no .THEN refreshChartUpDownTempoReal -> leituraMaisRecenteRede() da leitura');
            }
        }).catch(function (error) {
            console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------


    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------
    // Chart AlertasDiaRede



    function loadAlertaDiaRede() {
        new Chart(chartAlertasDiaRede, {
            type: 'doughnut',
            data: {
                labels: ['Estável', 'Alerta', 'Risco'],
                datasets: [{
                    label: 'Quantidade de alertas',
                    data: [arrayAlertasRede[0], arrayAlertasRede[1], arrayAlertasRede[2]],
                    backgroundColor: ['#65da65', '#F1CE14', 'crimson'],
                    borderColor: ['#65da65', '#F1CE14', 'crimson'],
                    borderWidth: 1
                }]
            },

            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }



    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------


    // FAZER A ESTRUTURA CERTA PARA O GRÁFICO
    let arrayComparacao = [
        [100, 80], [120, 90], [200, 150], [99, 99], [120, 40], [110, 100]
    ];
    let coresArrayComparacao = [
        ['#F1CE14', '#F1CE14'], ['#F1CE14', '#F1CE14'], ['#F1CE14', 'crimson'], ['crimson', '#65da65'], ['#65da65', '#65da65'], ['#65da65', '#65da65']
    ];
    new Chart(chartCompararRede, {
        type: 'bar',
        data: {
            labels: ['5 dias atrás', '4 dias atrás', '3 dias atrás', '2 dias atrás', ' 1 dia atrás', 'agora'],
            datasets: [{
                label: 'Média de uso de upload e download',
                data: [arrayComparacao[0], arrayComparacao[1], arrayComparacao[2], arrayComparacao[3], arrayComparacao[4], arrayComparacao[5]],
                backgroundColor: [coresArrayComparacao[0], coresArrayComparacao[1], coresArrayComparacao[2], coresArrayComparacao[3], coresArrayComparacao[4], coresArrayComparacao[5]],
                borderColor: ['#096B85'],
                borderWidth: .9
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>