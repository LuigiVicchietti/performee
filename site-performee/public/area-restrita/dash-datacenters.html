<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/logos/logo-guaxinim-solo.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="./css/dash.css">
    <title>Dashboard - Data Centers</title>
</head>

<body>
    <main>
        <nav class="select-disable" id="Nav">
            <img id="Expand" src="../assets/icons/open-icone.png" alt="Icone de expansão">
            <ul>
                <span>
                    <a href="./dash-geral.html">
                        <img src="../assets/icons/House.png" alt="Logo Home">
                        <text>Home</text>
                    </a>
                    <a href="#">
                        <img src="../assets/icons/servidores.png" alt="Logo aba servidores">
                        <text>Data Centers</text>
                    </a>
                    <a href="./dash-cadastros.html">
                        <img src="../assets/icons/PlusSquare.png" alt="Logo Cadastros">
                        <text>Cadastro</text>
                    </a>
                </span>
                <span>
                    <a href="./dash-perfil-user.html">
                        <img src="../assets/icons/User-icon.png" alt="Logo User">
                        <text>Perfil</text>
                    </a>
                    <a href="../login.html">
                        <img class="select-disable" src="../assets/icons/exit.png" alt="Sair">
                        <text style="color: crimson;">Sair</text>
                    </a>
                </span>
            </ul>
        </nav>
        <section>
            <header>
                <h1 class="select-disable">Painel Data Centers - <span id="QuemUsa">Guest</span> </h1>
                <div class="select-disable">
                    <img src="../assets/icons/pesquisa-icone.png" alt="Icone Pesquisa" id="Pesquisar">
                    <input type="text" name="input pesquisa" id="InputPesquisa"
                        placeholder="Pesquisar por empresa ou data center">
                </div>
                <!-- <img src="../assets/icons/FilePdf.png" alt="PDF"> -->
            </header>
            <div id="Content" class="scrollable"></div>
        </section>
        <div class="modal" id="Modal">
            <div class="content-modal" id="ModalContent"></div>
        </div>
        
    </main>
</body>

</html>
<script src="./js/global.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="./js/dash-datacenters.js"></script>
<script>
    function criarGraficos(index) {
        fetch(`/alerta/exibirQtdStatusPerDCenter/${index.idDCenter}`, {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        }).then((resposta) => {
            if (resposta.ok) {
                resposta.json().then((jsonInfo) => {
                    console.log(jsonInfo)
                    new Chart(document.getElementById(`${index.chart}`), {
                        type: 'doughnut',
                        data: {
                            labels: ['Estável', 'Cuidado', 'Risco'],
                            datasets: [{
                                label: 'Status do sensor',
                                data: [jsonInfo[0].quantidade, jsonInfo[1].quantidade, jsonInfo[2].quantidade],
                                backgroundColor: ['#65da65', '#F1CE14', 'crimson'],
                                borderColor: ['#65da65', '#F1CE14', 'crimson'],
                                borderWidth: 1
                            }]
                        },

                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                });
            } else {
                console.log('Erro no .THEN exibirStatusServidoresPerDCenter() do Servidor');
            }
        })
    }
</script>